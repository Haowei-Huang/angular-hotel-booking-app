<div>
    <form [formGroup]="cardInfoGroup" class="space-y-4">
        <mat-card-title class="text-lg m-2">Card Info</mat-card-title>
        <mat-card-content>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                <!-- Name on card -->
                <mat-form-field appearance="fill" class="w-full">
                    <mat-label>Name on card</mat-label>
                    <input matInput placeholder="Enter your name as shown on card" formControlName="cardName">
                    @if(cardInfoGroup.controls['cardName'].invalid){
                    @if(cardInfoGroup.controls['cardName'].hasError('required')){
                    <mat-error>
                        Name on card is required.
                    </mat-error>
                    }
                    @if(!cardInfoGroup.controls['cardName'].hasError('required') &&
                    cardInfoGroup.controls['cardName'].hasError('pattern')){
                    <mat-error>
                        Name on card is invalid
                    </mat-error>
                    }
                    }
                </mat-form-field>

                <!-- Card number -->
                <mat-form-field appearance="fill" class="w-full">
                    <mat-label>Card number</mat-label>
                    <input matInput placeholder="Enter your card number" formControlName="cardNumber">
                    @if(cardInfoGroup.controls['cardNumber'].invalid){
                    @if(cardInfoGroup.controls['cardNumber'].hasError('required')){
                    <mat-error>
                        Card number is required.
                    </mat-error>
                    }
                    @if(!cardInfoGroup.controls['cardNumber'].hasError('required') &&
                    cardInfoGroup.controls['cardNumber'].hasError('pattern')){
                    <mat-error>
                        The card number must be 16 digits.
                    </mat-error>
                    }
                    }
                </mat-form-field>

                <!-- Expiry date -->
                <mat-form-field appearance="fill" class="w-full">
                    <mat-label>Expiry date</mat-label>
                    <input matInput placeholder="MMYY" formControlName="expDate">
                    @if(cardInfoGroup.controls['expDate'].invalid){
                    @if(cardInfoGroup.controls['expDate'].hasError('required')){
                    <mat-error>
                        Expiry date is required.
                    </mat-error>
                    }
                    @if(!cardInfoGroup.controls['expDate'].hasError('required') &&
                    cardInfoGroup.controls['expDate'].hasError('pattern')){
                    <mat-error>
                        Expiry date format is MMYY.
                    </mat-error>
                    }
                    @if(!cardInfoGroup.controls['expDate'].hasError('required') &&
                    cardInfoGroup.controls['expDate'].hasError('custom')){
                    <mat-error>
                        {{cardInfoGroup.controls['expDate'].getError('custom')}}
                    </mat-error>
                    }
                    }
                </mat-form-field>

                <!-- CVV -->
                <mat-form-field appearance="fill" class="w-full">
                    <mat-label>CVV</mat-label>
                    <input matInput placeholder="Enter your CVV" formControlName="cvv">
                    @if(cardInfoGroup.controls['cvv'].invalid){
                    @if(cardInfoGroup.controls['cvv'].hasError('required')){
                    <mat-error>
                        CVV is required.
                    </mat-error>
                    }
                    @if(!cardInfoGroup.controls['cvv'].hasError('required') &&
                    cardInfoGroup.controls['cvv'].hasError('pattern')){
                    <mat-error>
                        CVV must be 3 digits.
                    </mat-error>
                    }
                    }
                </mat-form-field>
            </div>
        </mat-card-content>

        <!-- Billing Address Section -->
        <mat-card-title class="text-lg m-2">Billing Address</mat-card-title>
        <mat-card-content>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                <!-- Street -->
                <mat-form-field appearance="fill" class="w-full">
                    <mat-label>Street</mat-label>
                    <input matInput placeholder="Enter your street address"
                        [formControl]="$any(cardInfoGroup).controls['address'].get('street')">
                    @if($any(cardInfoGroup).controls['address'].get('street').invalid){
                    @if($any(cardInfoGroup).controls['address'].get('street').hasError('required')){
                    <mat-error>
                        Street is required.
                    </mat-error>
                    }
                    }
                </mat-form-field>

                <!-- City -->
                <mat-form-field appearance="fill" class="w-full">
                    <mat-label>City</mat-label>
                    <input matInput placeholder="Enter your city"
                        [formControl]="$any(cardInfoGroup).controls['address'].get('city')">
                    @if($any(cardInfoGroup).controls['address'].get('city').invalid){
                    @if($any(cardInfoGroup).controls['address'].get('city').hasError('required')){
                    <mat-error>
                        City is required.
                    </mat-error>
                    }
                    @if(!$any(cardInfoGroup).controls['address'].get('city').hasError('required') &&
                    $any(cardInfoGroup).controls['address'].get('city').hasError('pattern')){
                    <mat-error>
                        City is invalid.
                    </mat-error>
                    }
                    }
                </mat-form-field>

                <!-- Province -->
                <mat-form-field appearance="fill" class="w-full">
                    <mat-label>State/Province/Region</mat-label>
                    <input matInput placeholder="Enter your province"
                        [formControl]="$any(cardInfoGroup).controls['address'].get('province')">
                    @if($any(cardInfoGroup).controls['address'].get('province').invalid){
                    @if($any(cardInfoGroup).controls['address'].get('province').hasError('required')){
                    <mat-error>
                        Province is required.
                    </mat-error>
                    }
                    @if(!$any(cardInfoGroup).controls['address'].get('province').hasError('required') &&
                    $any(cardInfoGroup).controls['address'].get('province').hasError('pattern')){
                    <mat-error>
                        Province format should be 2 uppercase letters.
                    </mat-error>
                    }
                    }
                </mat-form-field>

                <!-- Postal Code -->
                <mat-form-field appearance="fill" class="w-full">
                    <mat-label>Postal Code</mat-label>
                    <input matInput placeholder="Enter your postal code"
                        [formControl]="$any(cardInfoGroup).controls['address'].get('postalCode')">
                    @if($any(cardInfoGroup).controls['address'].get('postalCode').invalid){
                    @if($any(cardInfoGroup).controls['address'].get('postalCode').hasError('required')){
                    <mat-error>
                        Postal code is required.
                    </mat-error>
                    }
                    @if(!$any(cardInfoGroup).controls['address'].get('postalCode').hasError('required')
                    &&
                    $any(cardInfoGroup).controls['address'].get('postalCode').hasError('pattern')){
                    <mat-error>
                        Postal code format is incorrect. It should be like "M1A 1M1" or "M1A1M1"
                    </mat-error>
                    }
                    }
                </mat-form-field>

                <!-- Country -->
                <mat-form-field appearance="fill" class="w-full">
                    <mat-label>Country</mat-label>
                    <input matInput placeholder="Enter your country"
                        [formControl]="$any(cardInfoGroup).controls['address'].get('country')">

                    @if($any(cardInfoGroup).controls['address'].get('country').invalid){
                    @if($any(cardInfoGroup).controls['address'].get('country').hasError('required')){
                    <mat-error>
                        Country is required.
                    </mat-error>
                    }
                    @if(!$any(cardInfoGroup).controls['address'].get('country').hasError('required')
                    &&
                    $any(cardInfoGroup).controls['address'].get('country').hasError('pattern')){
                    <mat-error>
                        Country format is incorrect.
                    </mat-error>
                    }
                    }
                </mat-form-field>
            </div>
        </mat-card-content>
    </form>
    <div class="my-[10px]">
        <button mat-raised-button color="primary" (click)="submitCardInfo()">Submit</button>
    </div>
</div>